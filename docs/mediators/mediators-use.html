<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Truck - Documentation</title>
  <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16" />
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,300' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="../../css/styles.css">
  <link rel="stylesheet" href="../../css/styles-docs.css">
  <link rel="stylesheet" href="../../prettify/obsidian.css">
  <script type='text/javascript' src='../../prettify/prettify.js'></script>
  <script type='text/javascript' src='../../prettify/lang-css.js'></script>
</head>
<body>
  <article>
    <nav>
      <div>
        <h1><a href="../../index.html">Truck</a></h1>
        <menu>
          <a href="../../quickstart.html">Quick Start</a>
          <a href="../../features.html">Features</a>
          <a class='selected' href="#">Docs</a>
          <a href="../../install.html">Install</a>
        </menu>
      </div>
    </nav>
    <header>
      <div>
        <h2>Docs</h2>
        <h3>Everything You Need to Know</h3>
      </div>
    </header>
    
    <section>
      <div>
        <div>
          <h2>Mediators</h2>
          <h3>Use</h3>
          <img src="../../images/truck-parts/Truck-Engine.png" alt="Truck Engine">
          <p>Setting up mediators is very simple. You just need to provide a handle for the mediator to use:</p>
          <pre class='prettyprint linenums'>
var fooMtor = $.Mediator('baz-handle');
var barMtor = $.Mediator('baz-handle');</pre>
          <p>In the above example, notice that we've created both mediators to use the same handle. This means that when anything publishes to that handle, both mediators will react. Think of a mediators handle as an event. When something dispatches that event handle, any mediator listening for it will react. Mediators do not need to share the same handle. That's up to your use case how you need mediators to react. One mediator might listen for a handle to do one thing, whereas another mediator might also be listening for the same handle to do something very different.</p>
          <p>Then you can define what you want the mediator to do using its <code>init</code> method. In the example below, although both mediators will be responding to the same handle, they react differently.</p>
          <pre class='prettyprint linenums'>
fooMtor.init(function(data) {
  console.log('1. Foo here.')
  console.log(data);
});

barMtor.init(function(data){
  console.log('2. Bar here.');
  console.log(data);
});</pre>
          <p>With the above code in place, we could run either mediator using their <code>run</code> method:</p>
          <pre class='prettyprint linenums'>
fooMtor.run('This is Godzilla!');
// results:
// 1. Foo here.
// This is Godzilla!

// 2. Bar here.
// This is Godzilla!</pre>
        <p>As you can see from the output, because both mediators are listening to the same handle, running one mediator will invoke the other mediator. Of course, if you don't want this happening, you wouldn't give both mediators the same handle. You can find out what handle a mediator is using by querying it:</p>
        <pre>
// Get fooMtor's handle:
fooMtor.getHandle();
// returns: "baz-handle"</pre>

        <h4>Controlling Your Controllers</h4>
        <p>Because mediators run when their handle is dispatched, it's possible that they can get very busy. Truck therefore provides a way to control how many times a mediator can run. You can stop a mediator. When you do so, you cannot run it and it will not react to its handle. Or you can provide a number in the stop method, which tells the mediator how many times to run before stopping. You can also tell a stopped mediator to restart. From the moment you restart a mediator, you will be able to run it and it will be able to react to dispatches to its handle. You can also provide a number value representing second for the mediator to restart. It will not be active until that provide amount of time has passed.</p>
        <pre class='prettyprint linenums'>
// Stop fooMtor immediately:
fooMtor.stop();
// Tell barMtor to stop after 10 runs:
barMtor.stop(10);
// Restart fooMtor immediately:
fooMtor.restart()
// Tell barMtor to restart after 10 seconds:
barMtor.stop(10);</pre>
      <p>You can find out how many times a mediator has run by querying it:</p>
      <pre class='prettyprint linenums'>
// returns how many times the mediator ran:
fooMtor.getCount();</pre>
      <p>You can find out if a mediator is stopped or not by querying it:</p>
      <pre class='prettyprint linenums'>
fooMtor.isStopped();
// returns true or false</pre>
      <p>You can control how a mediator is counting. You can tell it to reset its count to zero. You might want to do this if the number was very high and you want it to start over clean. Or you can tell a mediator to stop counting.</p>
      <pre class='prettyprint linenums'>
// Tell fooMtor to reset its count to zero:
fooMtor.resetCount();
// Tell barMtor to stop counting:
barMtor.stopCount();</pre>
      <p>Sometimes, under some particular circumstance, you might want to run a mediator just once and then kill it. Truck lets you kill mediators. Do so is permanent. They cannot be revived to run again. They are dead. To kill a mediator, you run the <code>kill</code> method on them:</p>
      <pre class='prettyprint linenums'>
// Kill fooMtor:
fooMtor.kill();
// fooMtor can never run again</pre>
      <p>You can find out if a mediator has been killed by querying it:</p>
      <pre class='prettyprint linenums'>
fooMtor.hasBeenKilled();
// returns true or false
      </pre>



        </div>
        
        <div id="menu">
          <ul>
            <li><a href='../models/models-intro.html'>Models</a></li>
            <li><a href="../views/views-intro.html">Views</a></li>
            <li><a href="../mediators/controllers-intro.html" class='selected'>Mediators</a>
              <ul>
                <li><a href="mediators-intro.html">Intro</a></li>
                <li><a href="mediators-use.html" class='selected'>Use</a></li>
                <li><a href="mediators-api.html">API</a></li>
              </ul>
            </li>
            <li><a href="../templates/templates-intro.html">Templates</a></li>
            <li><a href="../promises/promises-intro.html">Promises</a></li>
            <li><a href="../fetch/fetch-intro.html">Fetch</a></li>
            <li><a href="../router/router-intro.html">Router</a></li>
            <li><a href="../box/box-intro.html">Box</a></li>
            <li><a href="../widgets/widgets-intro.html">Widgets</a></li>
            <li><a href="../gestures/gestures-intro.html">Gestures</a></li>
            <li><a href="../dom/dom-intro.html">DOM</a></li>
            <li><a href="../utilities/utilities-intro.html">Utilities</a></li>
            <li><a href="../layouts/layouts-intro.html">Layouts</a></li>
            <li><a href="../themes/themes-intro.html">Themes</a></li>
            <li><a href="../dispatcher/dispatcher-intro.html">Dispatcher</a></li>
            <li><a href="../hybrids/hybrids-intro.html">Hybrids</a></li>
            <li><a href="../stacks/stacks-intro.html">Stacks</a></li>
            <li><a href="../jquery/jquery-intro.html">jQuery</a></li>
            <li><a href="../tutorials/tutorials-intro.html">Tutorials</a></li>
          </ul>
        </div>
      </div>
    </section>


    <footer>
      <div>
          <menu id='mainFooterMenu'>
            <a id='truckLogoLink' href="i../../ndex.html"><img src="../../images/footer-logo.png" alt="Truck"></a>
            <a href="../../quickstart.html">Quick Start</a>
            <a href="../../features.html">Features</a>
            <a href="../../install.html">Install</a>
          </menu>
        <aside>
          <menu id='social-links'>
            <a id='tumblr' href="#">Tumblr</a>
            <a id='github' href="#">Github</a>
            <a id='twitter' href="#">Twitter</a>
            <a id='npm' href="#">NPM</a>
          </menu>
        </aside>
      </div>
    </footer>
  </article>

<script>
  prettyPrint();
</script>
</body>
</html>